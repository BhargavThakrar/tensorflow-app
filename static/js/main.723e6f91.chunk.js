(this["webpackJsonptensorflow-app"]=this["webpackJsonptensorflow-app"]||[]).push([[0],{277:function(e,t,n){},283:function(e,t){},284:function(e,t){},292:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var r=n(33),a=n(13),i=n.n(a),c=n(109),s=n.n(c),o=(n(277),n(318)),l=n(324),u=n(205),d=n(10),p=n.n(d),g=n(14),b=n(7),j=Object(a.createContext)({});function f(e){return h.apply(this,arguments)}function h(){return(h=Object(g.a)(p.a.mark((function e(t){var n,r,a,i,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},Object.keys(n).length||(n.method="GET"),r="Something went wrong, please try again later.",e.prev=3,e.next=6,fetch(t,n);case 6:return a=e.sent,i=a.status<200||a.status>299,e.next=10,a.json();case 10:return c=e.sent,e.abrupt("return",{statusCode:a.status,data:i?null:c,error:i?c.message||r:null});case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",{statusCode:500,data:null,error:e.t0.message||r});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}var m=function(e){return new Promise((function(t){return setTimeout((function(){return t()}),e)}))},O=function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.substr(1,e.length))};var x=function(e){var t=e.children,n=Object(a.useState)(null),i=Object(b.a)(n,2),c=i[0],s=i[1],o=Object(a.useState)(null),l=Object(b.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(!1),m=Object(b.a)(h,2),O=m[0],x=m[1],v={imageResults:c,error:u,isLoading:O,searchImages:Object(a.useCallback)(function(){var e=Object(g.a)(p.a.mark((function e(t,n){var r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),s(null),x(!0),e.prev=3,e.next=6,f(n);case 6:if(r=e.sent,a=r.data,!(i=r.error)){e.next=12;break}return d(i),e.abrupt("return");case 12:s({images:a.message,searchResultsFor:t}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),d(e.t0);case 18:return e.prev=18,x(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),lazyLoadImages:Object(a.useCallback)((function(e){if(e){var t=[].slice.call(e.querySelectorAll("img.lazy"));if("IntersectionObserver"in window){var n=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target;t.src=t.dataset.src,t.classList.remove("lazy"),n.unobserve(t)}}))}));return void t.forEach((function(e){n.observe(e)}))}}}),[]),resetSearch:Object(a.useCallback)((function(){s(null),d(null),x(!1)}),[])};return Object(r.jsx)(j.Provider,{value:v,children:t})},v=n(322),y=n(320),w=n(326),k=n(321),I=n(266),N=(n(299),function(){return Object(a.useContext)(j)}),C="UPLOADING",L="IDENTIFYING",T="CLEAR",S={isLoading:!0,loadingText:"Loading model..."},A=function(e,t){switch(t.type){case C:return{isLoading:!0,loadingText:"Uploading image..."};case L:return{isLoading:!0,loadingText:"Identifying breed..."};case T:return{isLoading:!1,loadingText:null};default:return e}},F=[{pattern:/siberian.*husky/,input:"husky"},{pattern:/.*eskimo.*/,input:"eskimo"},{pattern:/english.*hound/,input:"hound/english"},{pattern:/blood.*hound/,input:"hound/blood"},{pattern:/flat.*coated.*retriever/,input:"retriever/flatcoated"},{pattern:/american.*staffordshire.*terrier/,input:"terrier/american"},{pattern:/bernese.*mountain.*/,input:"mountain/bernese"}],R=function(e){return Array.isArray(e)&&e.length?e.map((function(e){var t,n=e.className,r=e.probability;return{className:(t=n,"string"!==typeof t?null:-1!==t.indexOf(",")?O(t.split(",")[0]):O(t)),probability:parseFloat((100*r).toFixed(2))}})):null},P=Object(o.a)((function(e){return Object(l.a)({primaryImage:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},avatar:{width:"auto",textAlign:"center",padding:e.spacing(2),"& > img":{maxWidth:"100%",height:"auto"}},imagePreview:{display:"flex",justifyContent:"center",alignItems:"center",border:"2px dashed",width:200,minHeight:200,marginBottom:e.spacing(2),color:"#A9A9A9"},imageDescription:{textAlign:"center",marginBottom:e.spacing(2)},uploadButton:{margin:e.spacing(2,0,1,0)},strong:{fontWeight:"bold"},link:{cursor:"pointer",color:e.palette.success.main,padding:0,textTransform:"inherit",fontSize:12,"&:hover":{textDecoration:"underline",backgroundColor:"transparent"}},footerTexts:{textAlign:"center",padding:e.spacing(1),"& > span":{marginBottom:e.spacing(1),display:"block"}}})})),E=["image/jpeg","image/jpg","image/png"];var B=function(){var e=P(),t=Object(a.useReducer)(A,S),n=Object(b.a)(t,2),i=n[0],c=i.isLoading,s=i.loadingText,o=n[1],l=Object(a.useState)(null),d=Object(b.a)(l,2),j=d[0],f=d[1],h=Object(a.useState)(null),O=Object(b.a)(h,2),x=O[0],B=O[1],U=Object(a.useState)(null),z=Object(b.a)(U,2),D=z[0],W=z[1],G=Object(a.useState)(null),H=Object(b.a)(G,2),J=H[0],V=H[1],q=N(),M=q.searchImages,Y=q.resetSearch,K=Object(a.useRef)(null),Q=function(e){return E.includes(e.type)},X=function(){var e=Object(g.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.currentTarget.files)||!n[0]){e.next=11;break}if(f(null),V(null),B(null),Y(),Q(n[0])){e.next=7;break}return r=E.map((function(e){return e.substr(e.indexOf("/")+1,e.length)})),B("Invalid file. Only these files are allowed - ".concat(r.join(", "))),e.abrupt("return");case 7:return o({type:C}),e.next=10,m(500);case 10:f(URL.createObjectURL(n[0]));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o({type:L}),!K.current||!D){e.next=7;break}return e.next=4,D.classify(K.current);case 4:t=e.sent,V(R(t)),o({type:T});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){return function(){M(e,"".concat("https://dog.ceo/api/breed","/").concat(function(e){for(var t=e.toLowerCase(),n=0;n<F.length;n++){var r=F[n],a=r.pattern,i=r.input;if(a.test(t))return i}var c=t.split(" ")||[];return c.length?c.reduce((function(e,t){return e.unshift(t),e}),[]).join("/"):t}(e),"/images"))}};return Object(a.useEffect)((function(){Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=W,e.next=3,I.a({version:2,alpha:.5});case 3:e.t1=e.sent,(0,e.t0)(e.t1),o({type:T});case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:e.primaryImage,children:[Object(r.jsx)("div",{className:e.imagePreview,children:j?Object(r.jsx)("div",{className:e.avatar,children:Object(r.jsx)("img",{ref:K,alt:"dog breed preview",src:j,onLoad:Z})}):Object(r.jsx)(u.a,{children:"Image preview"})}),J&&J.length>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(u.a,{className:e.strong,children:"Predictions"}),Object(r.jsx)(y.a,{dense:!0,disablePadding:!0,children:J.map((function(t){var n=t.className,a=t.probability;return Object(r.jsx)(w.a,{children:Object(r.jsx)(k.a,{primary:"".concat(n," (").concat(a,"%)"),secondary:Object(r.jsx)(v.a,{role:"link",className:e.link,onClick:$(n),children:"Find similar images"})})},"".concat(n).concat(a))}))})]}),Object(r.jsxs)(v.a,{disabled:c,color:"primary",variant:"contained",component:"label",className:e.uploadButton,children:[s||"Upload image",Object(r.jsx)("input",{type:"file",hidden:!0,onChange:X})]}),Object(r.jsxs)("div",{className:e.footerTexts,children:[Object(r.jsx)(u.a,{variant:"caption",children:"Upload any dog image and let system predict the breed!"}),Object(r.jsx)(u.a,{variant:"caption",children:Object(r.jsx)("span",{className:e.strong,children:"Note: It detects all types of images but, if you need to further search for similar images then, please upload dog images only."})}),x&&Object(r.jsx)(u.a,{variant:"subtitle1",color:"error",children:x})]})]})})},U=n(94),z=n(323),D=Object(o.a)((function(e){var t,n;return Object(l.a)({results:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",marginTop:e.spacing(5),padding:e.spacing(0,1)},resultsTitle:{width:"100%",padding:e.spacing(1),backgroundColor:"#fff",textAlign:"center",position:"sticky",top:0},resultImage:(n={height:"20vh",padding:e.spacing(2)},Object(U.a)(n,e.breakpoints.down(700),{width:"45%",padding:e.spacing(1)}),Object(U.a)(n,"& > img",(t={objectFit:"cover"},Object(U.a)(t,e.breakpoints.down(700),{maxWidth:"100%",height:"auto"}),Object(U.a)(t,"minWidth","100%"),Object(U.a)(t,"maxHeight","20vh"),Object(U.a)(t,"verticalAlign","bottom"),Object(U.a)(t,"borderRadius",e.spacing(1)),Object(U.a)(t,"&:hover",{boxShadow:"2px 2px 6px 2px #ccc"}),Object(U.a)(t,e.breakpoints.up(700),{border:"1px solid #d9d9d9",padding:e.spacing(1)}),t)),n),error:{padding:e.spacing(1),color:"#fff",backgroundColor:e.palette.error.main}})}));var W=function(){var e=D(),t=N(),n=t.imageResults,i=t.error,c=t.lazyLoadImages,s=t.isLoading,o=n||{},l=o.images,d=o.searchResultsFor,p=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;(c(p.current),p.current&&p.current.scrollIntoView)&&(null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[n,i,c]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:e.results,ref:p,children:[i&&Object(r.jsx)(z.a,{className:e.error,role:"alert",children:Object(r.jsx)(u.a,{variant:"subtitle1",children:i})}),s&&"Loading images...",l&&l.length>0&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(u.a,{variant:"h4",className:e.resultsTitle,children:['Similar images of "',d,'"']}),l.map((function(t){return Object(r.jsx)("div",{className:e.resultImage,children:Object(r.jsx)("img",{className:"lazy",alt:"dog breed",src:"./images/loading-img.jpg","data-src":t})},t)}))]})]})})},G=Object(o.a)((function(e){return Object(l.a)({header:{textAlign:"center",marginTop:e.spacing(2)},content:{marginTop:e.spacing(4)}})}));var H=function(){var e=G();return Object(r.jsxs)(x,{children:[Object(r.jsx)("header",{className:e.header,children:Object(r.jsx)(u.a,{variant:"h3",children:"Tensorflow app"})}),Object(r.jsxs)("main",{className:e.content,children:[Object(r.jsx)(B,{}),Object(r.jsx)(W,{})]})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,327)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(H,{})}),document.getElementById("root")),J()}},[[300,1,2]]]);
//# sourceMappingURL=main.723e6f91.chunk.js.map